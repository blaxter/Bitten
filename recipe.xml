<?xml version="1.0"?>
<build description="My project"
    xmlns:c="bitten:bitten.build.ctools"
    xmlns:python="bitten:bitten.build.pythontools">

    <step id="build" title="Let Distutils build the python code">
        <python:distutils command="build"/>
    </step>

    <step id="test" title="Unit tests"
          description="Run unit tests and record code coverage">
        <python:distutils command="unittest"/>
        <reports>
            <python:unittest file="build/test-results.xml"/>
            <python:trace summary="build/test-coverage.txt" 
                coverdir="build/coverage" include="trac*" exclude="*.tests.*"/>
        </reports>
    </step>

    <step id="lint" title="Run Pylint" onerror="ignore"
          description="Run Pylint to check for bad style and potential errors">
        <python:exec module="logilab.pylint.lint"
            output="build/pylint-results.txt"
            args="--parseable=yes --include-ids=yes
                  --disable-msg=C0101,E0201,E0213,W0103,W0704,R0921,R0923
                  --ignore=tests bitten"/>
        <reports>
            <python:pylint file="build/pylint-results.txt"/>
        </reports>
    </step>

    <step id="dist" title="Package up distributions">
        <python:distutils command="sdist"/>
    </step>

</build>
